<!DOCTYPE html>
<html lang="sl">
<head>
  <meta charset="UTF-8" />
  <title>‚ö° Energetski Manifest ¬∑ AI, Tok in Kapital</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #05060a;
      --bg-soft: #0b0c10;
      --bg-softer: #12141b;
      --accent: #ffd447;
      --accent-soft: #ffaf40;
      --accent-strong: #ff7722;
      --text: #e5e7f0;
      --muted: #8b93a7;
      --border: #2a2f3a;
      --danger: #ff4b5c;
      --good: #3ddc97;
      --warn: #ffb347;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.45);
      --radius-lg: 14px;
      --radius-md: 9px;
      --radius-sm: 6px;
      --transition-fast: 180ms ease-out;
      --transition-med: 260ms ease-in-out;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #15192a 0, #05060a 45%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.5;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* Top Nav */

    .top-nav {
      position: sticky;
      top: 0;
      z-index: 999;
      backdrop-filter: blur(16px);
      background: linear-gradient(to bottom, rgba(5,6,10,0.96), rgba(5,6,10,0.92));
      border-bottom: 1px solid #181b24;
    }

    .top-nav-inner {
      max-width: 1120px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 16px;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 12px;
      color: var(--muted);
    }

    .brand-badge {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 0%, #ffe18a 0, #ff8b3d 38%, #9b1c2a 70%, #05060a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 18px rgba(255, 173, 72, 0.65);
      font-size: 14px;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .nav-link {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid transparent;
      cursor: pointer;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform 120ms ease-out;
    }

    .nav-link:hover {
      background: rgba(255, 212, 71, 0.05);
      border-color: rgba(255, 212, 71, 0.28);
      color: var(--text);
      transform: translateY(-1px);
    }

    .nav-link.active {
      background: radial-gradient(circle at 0 0, #ffd447 0, #ff7722 48%, #c33e2d 100%);
      color: #05060a;
      border-color: transparent;
      box-shadow: 0 0 16px rgba(255, 172, 60, 0.6);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      color: var(--muted);
    }

    .pill {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid #262a34;
      background: radial-gradient(circle at 0 0, rgba(255, 212, 71, 0.07) 0, rgba(11,12,16,0.9) 55%, rgba(0,0,0,0.9) 100%);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: radial-gradient(circle, #40ffbf 0, #10b981 40%, #064e3b 100%);
      box-shadow: 0 0 10px rgba(52, 211, 153, 0.85);
    }

    /* Layout */

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 18px 16px 42px;
    }

    header.page-header {
      padding: 16px 0 18px;
      border-bottom: 1px solid rgba(255,255,255,0.04);
      margin-bottom: 20px;
    }

    .page-header h1 {
      font-size: 22px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 4px;
    }

    .page-header h2 {
      font-size: 15px;
      font-weight: 500;
      color: var(--muted);
      margin-bottom: 10px;
    }

    .page-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 11px;
      color: var(--muted);
    }

    .page-meta span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .tag {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid #262a34;
      background: rgba(15,23,42,0.9);
      font-size: 10px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 26px;
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.4fr);
      gap: 20px;
    }

    @media (max-width: 880px) {
      .grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .top-nav-inner {
        flex-wrap: wrap;
        justify-content: center;
      }
      .nav-right {
        width: 100%;
        justify-content: center;
      }
    }

    /* Cards */

    .card {
      background: radial-gradient(circle at top left, #15192a 0, #05060a 52%, #020308 100%);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-soft);
      padding: 16px 16px 14px;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(255,212,71,0.08), transparent 55%);
      opacity: 0.8;
      pointer-events: none;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
      position: relative;
      z-index: 2;
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title span.icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.6);
    }

    .card-subtitle {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 8px;
      position: relative;
      z-index: 2;
    }

    .card-body {
      position: relative;
      z-index: 2;
      font-size: 13px;
      color: var(--text);
    }

    .pill-mini {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.35);
      font-size: 10px;
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .highlight {
      color: var(--accent);
      font-weight: 500;
    }

    blockquote {
      border-left: 2px solid rgba(148,163,184,0.7);
      margin: 6px 0 10px;
      padding-left: 12px;
      font-size: 12px;
      color: var(--muted);
      font-style: italic;
    }

    /* Section containers */

    section {
      scroll-margin-top: 72px;
    }

    .section-label {
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .section-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .section-grid {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 2.1fr);
      gap: 18px;
    }

    @media (max-width: 880px) {
      .section-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    ul {
      padding-left: 18px;
      margin-bottom: 8px;
    }

    ul li {
      margin-bottom: 4px;
    }

    code {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: rgba(15,23,42,0.9);
      padding: 2px 4px;
      border-radius: 4px;
      font-size: 11px;
    }

    pre {
      font-family: "SF Mono", ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      background: #050711;
      border-radius: 8px;
      padding: 8px 10px;
      overflow-x: auto;
      border: 1px solid #262a34;
      margin-top: 6px;
      margin-bottom: 8px;
    }

    /* DASHBOARD ELEMENTS */

    .dashboard-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.4fr);
      gap: 18px;
    }

    @media (max-width: 960px) {
      .dashboard-grid {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .chart-container {
      position: relative;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      background: radial-gradient(circle at top, #171b2b 0, #05060a 50%, #01030a 100%);
      padding: 12px 12px 10px;
      box-shadow: var(--shadow-soft);
      overflow: hidden;
    }

    .chart-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .chart-title {
      font-size: 12px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chart-title span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle, #ffd447 0, #ff7722 45%, #9b1c2a 100%);
      box-shadow: 0 0 12px rgba(255,183,55,0.75);
    }

    .chart-meta {
      font-size: 11px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .badge {
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.4);
      background: rgba(15,23,42,0.9);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    canvas {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 10px;
      background: radial-gradient(circle at top, #05060a 0, #000 60%);
    }

    .chart-footer {
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--muted);
      flex-wrap: wrap;
    }

    .control-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .slider-label {
      font-size: 11px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 4px;
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 160px;
      height: 4px;
      border-radius: 999px;
      background: linear-gradient(to right, #ffd447, #ff7722);
      outline: none;
      cursor: pointer;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 15px;
      height: 15px;
      background: radial-gradient(circle, #fff 0, #ffd447 40%, #ff7722 75%);
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(255,212,71,0.7);
      border: 1px solid #111;
    }

    input[type="range"]::-moz-range-thumb {
      width: 15px;
      height: 15px;
      background: radial-gradient(circle, #fff 0, #ffd447 40%, #ff7722 75%);
      border-radius: 50%;
      border: none;
      box-shadow: 0 0 10px rgba(255,212,71,0.7);
    }

    .toggle-group {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      color: var(--muted);
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #262a34;
      cursor: pointer;
      background: rgba(15,23,42,0.7);
      transition: background var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), transform 120ms ease-out;
    }

    .toggle input {
      display: none;
    }

    .toggle-indicator {
      width: 12px;
      height: 12px;
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #020617;
      position: relative;
    }

    .toggle-indicator::after {
      content: "";
      position: absolute;
      inset: 2px;
      border-radius: inherit;
      background: radial-gradient(circle, #ffd447 0, #ff7722 60%, #9b1c2a 100%);
      opacity: 0;
      transform: scale(0.4);
      transition: opacity var(--transition-fast), transform var(--transition-fast);
    }

    .toggle.active {
      border-color: rgba(255,212,71,0.6);
      color: var(--text);
      background: rgba(249,115,22,0.16);
      transform: translateY(-1px);
    }

    .toggle.active .toggle-indicator::after {
      opacity: 1;
      transform: scale(1);
    }

    /* Tooltip */

    .tooltip {
      position: fixed;
      z-index: 9999;
      pointer-events: none;
      background: rgba(15,23,42,0.95);
      border-radius: 6px;
      padding: 6px 8px;
      border: 1px solid #404656;
      font-size: 11px;
      color: var(--text);
      max-width: 260px;
      display: none;
      box-shadow: 0 10px 24px rgba(0,0,0,0.7);
    }

    .tooltip strong {
      color: var(--accent);
      font-weight: 600;
    }

    /* Ownership list */

    .ownership-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.5fr);
      gap: 12px;
    }

    @media (max-width: 720px) {
      .ownership-layout {
        grid-template-columns: minmax(0,1fr);
      }
    }

    .ownership-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 12px;
    }

    .company-pill {
      padding: 6px 9px;
      border-radius: 8px;
      border: 1px solid #262a34;
      background: rgba(15,23,42,0.8);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      cursor: pointer;
      transition: background var(--transition-fast), border-color var(--transition-fast), transform 120ms ease-out;
    }

    .company-pill:hover {
      background: rgba(251,191,36,0.06);
      border-color: rgba(251,191,36,0.55);
      transform: translateY(-1px);
    }

    .company-pill.active {
      background: radial-gradient(circle at 0 0, rgba(255,212,71,0.25), rgba(15,23,42,0.95));
      border-color: rgba(251,191,36,0.9);
      box-shadow: 0 0 18px rgba(251,191,36,0.45);
    }

    .company-name {
      font-weight: 500;
      font-size: 12px;
    }

    .company-meta {
      font-size: 11px;
      color: var(--muted);
    }

    .company-score {
      font-size: 11px;
      color: var(--accent);
    }

    /* Sources */

    .sources-list {
      font-size: 11px;
      color: var(--muted);
      max-height: 260px;
      overflow-y: auto;
      padding-right: 6px;
    }

    .sources-list ul {
      list-style: none;
      padding-left: 0;
    }

    .sources-list li {
      margin-bottom: 4px;
    }

    .sources-list code {
      font-size: 10px;
    }

    /* Footer */

    footer {
      margin-top: 28px;
      padding-top: 14px;
      border-top: 1px solid rgba(148,163,184,0.18);
      font-size: 11px;
      color: var(--muted);
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: space-between;
      align-items: center;
    }

    footer .foot-left {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    footer .foot-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .foot-tag {
      border-radius: 999px;
      border: 1px solid #262a34;
      padding: 2px 8px;
    }

    /* Simple fade-in */

    .fade-in {
      opacity: 0;
      transform: translateY(6px);
      animation: fadeInUp 650ms var(--transition-med) forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>

  <!-- Tooltip -->
  <div id="tooltip" class="tooltip"></div>

  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="top-nav-inner">
      <div class="brand">
        <div class="brand-badge">üúÇ</div>
        <div>
          <div>ENERGETSKI MANIFEST</div>
          <div style="font-size:10px; text-transform:none; letter-spacing:0.04em; color:var(--muted);">
            AI ¬∑ TOK ¬∑ KAPITAL ¬∑ 2030
          </div>
        </div>
      </div>

      <div class="nav-links">
        <button class="nav-link active" data-target="manifest">‚ö° Manifest</button>
        <button class="nav-link" data-target="analysis">üìä Analiza</button>
        <button class="nav-link" data-target="dashboard">üéõÔ∏è Dashboard</button>
        <button class="nav-link" data-target="sources">üìÑ Viri</button>
      </div>

      <div class="nav-right">
        <span class="pill">
          <span class="pill-dot"></span>
          <span>Offline ¬∑ Brez sledenja</span>
        </span>
      </div>
    </div>
  </nav>

  <div class="page">
    <header class="page-header">
      <h1>DEAL ZA TOK, NE ZA PEKEL</h1>
      <h2>Bloomberg-style laboratorij za tvoje oro≈æje: manifest, model in dokazi v enem artefaktu.</h2>
      <div class="page-meta">
        <span>üóìÔ∏è Posodobljeno: <strong>2. december 2025</strong></span>
        <span>üåç Fokus: AI, energija, EU, kapital</span>
        <span class="tag">Sidro dr≈æi. Ogenj gori. Manifest ≈æivi.</span>
      </div>
    </header>

    <main>

      <!-- MANIFEST SECTION -->
      <section id="manifest" class="fade-in">
        <div class="grid">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">‚ö°</span>
                ENERGETSKI MANIFEST
              </div>
              <span class="pill-mini">Za ulico ¬∑ 1 stran ¬∑ Oro≈æje</span>
            </div>
            <div class="card-subtitle">
              To je verzija za delavca, mamo, ≈°tudenta in sindikalca. Ni teorija ‚Äì je
              <span class="highlight">dogovor, ki ga lahko podpi≈°e≈°</span>.
            </div>
            <div class="card-body">
              <p><strong>PROBLEM: Sistem, ki te melje v pepel.</strong></p>
              <p style="margin-top:4px;">
                Elektrika je nova kri. Brez nje ni doma, ni dela, ni signala. Vtiƒç pa dr≈æi
                <span class="highlight">koncentriran kapital</span>, ki slu≈æi na krizi, subvencijah in AI-po≈ære≈°nosti.
              </p>

              <blockquote>
                ‚ÄúDo 2030 bo AI pojedel toliko elektrike kot celotna Japonska.
                <br>Vpra≈°anje ni, ali bo ‚Äúpametna‚Äù ‚Äì vpra≈°anje je, kdo bo v temi.‚Äù
              </blockquote>

              <p style="margin-bottom:6px;"><strong>DEAL: Vi ostanete pohlepni, mi pre≈æivimo.</strong></p>
              <ul>
                <li><strong>Osnovni tok kot javna kri:</strong> prvih 200 kWh/mesec regulirano, brez davkov. Profit na luksuzu (AI, kripto, jahte).</li>
                <li><strong>Jedrska hrbtenica + OVE:</strong> SMR + veter + sonce + baterije, ne ‚Äúzeleni PowerPoint brez backupa‚Äù.</li>
                <li><strong>AI kot orodje, ne veriga:</strong> odprti modeli za ≈°ole in delo, za≈°ƒçita moderatorjev in delavcev v verigi.</li>
                <li><strong>Konec izsiljevanja z omre≈æjem:</strong> antitrust, lokalni nadzor distribucije, zunanji stro≈°ki v bilancah.</li>
              </ul>

              <p style="margin-top:8px;"><strong>AKCIJA: Ne molitev, ampak organizacija.</strong></p>
              <ul>
                <li>Podpri SMR in energetske kooperative v svoji regiji.</li>
                <li>Zahtevaj osnovni tok kot javno dobrino v zakonodaji.</li>
                <li>Deli manifest v sindikatih, lokalnih skupnostih in na X.</li>
                <li>Geslo: <span class="highlight">‚ÄúPohlep OK. Pekel ne.‚Äù</span></li>
              </ul>

              <p style="margin-top:10px; font-size:11px; color:var(--muted);">
                Za polno besedilo manifesta uporabi to HTML kot ogrodje. Ta dashboard je
                <strong>front-end oro≈æje</strong> ‚Äì ne PDF za v predal.
              </p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üì¶</span>
                PAKET: MANIFEST + ANALIZA
              </div>
            </div>
            <div class="card-body">
              <p style="font-size:13px; margin-bottom:8px;">
                Ta artefakt je zgrajen kot <strong>dvojni udarec</strong>:
              </p>
              <ul>
                <li><strong>Manifest:</strong> uliƒçni tekst, ƒçustvo, klic k akciji.</li>
                <li><strong>Analiza:</strong> hladna anatomija AI-porabe, SMR ekonomije in lastni≈°tva energetike.</li>
                <li><strong>Dashboard:</strong> Bloomberg-style vizualizacija, ki preklopi mo≈ægane v ‚Äúanalizo‚Äù, ne v ‚Äúskrolanje‚Äù.</li>
              </ul>

              <p style="font-size:12px; margin-top:10px;">
                Ta loƒçitev ni estetika ‚Äì je taktika:
              </p>
              <ul>
                <li>Ljudje, ki delajo, potrebujejo <strong>jedro v 5 minutah</strong>.</li>
                <li>Novinarji in raziskovalci potrebujejo <strong>model in ≈°tevilke</strong>.</li>
                <li>Pravniki in politiki potrebujejo <strong>vizualne dokaze</strong>, ki prestanejo kri≈æanje.</li>
              </ul>

              <p style="font-size:12px; margin-top:10px;">
                Spodaj so <strong>trije grafi</strong>, ki nosijo ogrodje zgodbe:
              </p>
              <ul>
                <li>Rast AI porabe elektrike (2024‚Äì2030) v TWh.</li>
                <li>Primerjava LCOE: SMR vs veter, sonce, plin, premog.</li>
                <li>Zemljevid lastni≈°tva velikih evropskih energetskih podjetij.</li>
              </ul>

              <p style="font-size:11px; color:var(--muted); margin-top:10px;">
                Vse ≈°tevilke so zamenljive v JS objektih spodaj. Ta file je
                <strong>frame</strong>. Ti si <strong>kalibrator</strong>.
              </p>

              <div style="text-align:center; margin-top:12px;">
                <a href="#dashboard" class="nav-link active" style="font-size:11px; text-transform:none;">
                  üéõÔ∏è Skoƒçi na interaktivni dashboard
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ANALYSIS SECTION -->
      <section id="analysis" style="display:none;">
        <div class="section-label">Analiza</div>
        <div class="section-title">Geopolitiƒçna in ekonomska anatomija: AI, energija in kapital do 2030</div>

        <div class="section-grid">
          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üìä</span>
                FIZIKA INTELIGENCE (2025‚Äì2030)
              </div>
            </div>
            <div class="card-body">
              <p>
                Podatki Mednarodne agencije za energijo (IEA) ka≈æejo, da se bo
                <span class="highlight">poraba elektrike v podatkovnih centrih</span> do 2030
                zvi≈°ala na cca <strong>945 TWh</strong>. To je <strong>primerljivo s celotno letno
                porabo Japonske</strong>.
              </p>

              <p style="margin-top:6px;">
                Digitalni sektor se iz ‚Äúuƒçinkovitega dodatka‚Äù spreminja v
                <strong>te≈æko industrijo</strong>, ki na omre≈æje pritiska enako kot jeklarne in
                aluminijaste talilnice ‚Äì samo da stoji bli≈æje mestom in omre≈ænim ozkim grlom.
              </p>

              <blockquote>
                Fizika raƒçunanja trƒçi v elektriƒçna omre≈æja, trg dela in realnost
                kapitalskih stro≈°kov. ‚ÄúOblak‚Äù ima maso ‚Äì meri se v gigavatih.
              </blockquote>

              <p style="margin-top:6px;">
                Jevonsov paradoks pomeni, da veƒçja uƒçinkovitost ƒçipov ne zni≈æa porabe ‚Äì
                <strong>zvi≈°a povpra≈°evanje</strong>. Cenej≈°a inferenca = AI povsod = milijarde
                malih klicev, ki se zlivajo v eno veliko breme.
              </p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <div class="card-title">
                <span class="icon">üè¶</span>
                ARHITEKTURA KAPITALA
              </div>
            </div>
            <div class="card-body">
              <p>
                Lastni≈°ke strukture RWE, Iberdrole, Enela in EDF razkrivajo kombinacijo
                <strong>univerzalnega lastni≈°tva</strong> (BlackRock, Vanguard itd.) in
                <strong>strate≈°kega dr≈æavnega kapitalizma</strong> (Italija, Francija, Katar).
              </p>

              <p style="margin-top:6px;">
                ‚ÄúKartel‚Äù ni dimna soba ‚Äì je <strong>struktura</strong> pasivnega upravljanja
                premo≈æenja, kjer isti skladi sedijo na 4‚Äì6 % skoraj vseh pomembnih
                energetskih podjetij in s tem tiho gladijo konkurenco in standardizirajo ESG.
              </p>

              <p style="margin-top:6px;">
                EDF je nacionaliziran 100 %. Enel ima zlato delnico dr≈æave. RWE in Iberdrola
                imata v lastni≈°tvu tudi Katar. Rezultat:
                <strong>suverenost omre≈æja je hibrid dr≈æave in kapitala</strong>.
              </p>

              <p style="margin-top:8px; font-size:11px; color:var(--muted);">
                Podrobni odstavki iz tvojega poroƒçila (‚ÄúDel I ‚Äì VI‚Äù) se lahko vgradijo tu.
                Ta blok je samo destilirana kost za hitro branje.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- DASHBOARD SECTION -->
      <section id="dashboard" style="display:none;">
        <div class="section-label">Dashboard</div>
        <div class="section-title">Interaktivni Bloomberg-stil pogled: AI, LCOE in lastni≈°tvo</div>

        <!-- FIRST ROW: AI ENERGY + LCOE -->
        <div class="dashboard-grid">
          <!-- AI ENERGY GROWTH -->
          <div class="chart-container">
            <div class="chart-header">
              <div class="chart-title">
                <span class="dot"></span>
                AI Poraba Elektrike (TWh)
              </div>
              <div class="chart-meta">
                <span class="badge">2024‚Äì2030</span>
                <span>Vir: IEA scenarij (osnova) ¬∑ zamenjaj podatke v JS</span>
              </div>
            </div>
            <canvas id="aiEnergyChart" width="560" height="260"></canvas>
            <div class="chart-footer">
              <div class="control-row">
                <div class="slider-label">
                  Leto: <span id="aiYearLabel" class="highlight">2024</span>
                </div>
                <input type="range" id="aiYearSlider" min="2024" max="2030" step="1" value="2024" />
              </div>
              <div style="font-size:11px; text-align:right;">
                <span style="display:block;">
                  üüß AI podatkovni centri ¬∑ üü¶ Japonska ¬∑ üü© Brazilija+Argentina
                </span>
                <span style="color:var(--muted);">
                  Premikaj leto ¬∑ opazuj, kdaj AI prehiti dr≈æave.
                </span>
              </div>
            </div>
          </div>

          <!-- LCOE COMPARISON -->
          <div class="chart-container">
            <div class="chart-header">
              <div class="chart-title">
                <span class="dot"></span>
                LCOE &quot;Ko≈°arica&quot; (USD/MWh)
              </div>
              <div class="chart-meta">
                <span class="badge">SMR vs OVE vs Plin/Premog</span>
              </div>
            </div>
            <canvas id="lcoeChart" width="520" height="260"></canvas>
            <div class="chart-footer">
              <div class="control-row">
                <div class="toggle-group" id="lcoeToggles">
                  <!-- toggles generated by JS -->
                </div>
              </div>
              <div style="font-size:11px;">
                <span>
                  Klikni vire ¬∑ graf poka≈æe, kako ‚Äúpoceni‚Äù v resnici ni poceni,
                  ko gleda≈° <strong>firm power</strong>.
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- SECOND ROW: OWNERSHIP MAP + SOURCES SNAPSHOT -->
        <div class="dashboard-grid" style="margin-top:18px;">
          <!-- OWNERSHIP -->
          <div class="chart-container">
            <div class="chart-header">
              <div class="chart-title">
                <span class="dot"></span>
                Lastni≈°tvo Energetskih Podjetij (EU)
              </div>
              <div class="chart-meta">
                <span class="badge">RWE ¬∑ Iberdrola ¬∑ Enel ¬∑ EDF</span>
              </div>
            </div>

            <div class="ownership-layout">
              <div class="ownership-list" id="ownershipList">
                <!-- companies injected by JS -->
              </div>
              <div>
                <canvas id="ownershipChart" width="520" height="220"></canvas>
                <div class="chart-footer">
                  <div style="font-size:11px;">
                    <strong id="ownershipTitle">Izberi podjetje levo</strong>
                    <br />
                    <span id="ownershipSubtitle" style="color:var(--muted);">
                      Prikaz: dr≈æava, skladi, Katar, ostalo.
                    </span>
                  </div>
                  <div style="text-align:right; font-size:10px; color:var(--muted);">
                    Sestavi argument:
                    <br />
                    ‚ÄúTo ni teorija zarote ‚Äì to je <strong>javna delni≈°ka knjiga</strong>.‚Äù
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- SOURCES SNAPSHOT -->
          <div class="chart-container">
            <div class="chart-header">
              <div class="chart-title">
                <span class="dot"></span>
                Hitri pregled virov
              </div>
              <div class="chart-meta">
                <span class="badge">IEA ¬∑ OECD ¬∑ Sodi≈°ƒça ¬∑ Mediji</span>
              </div>
            </div>
            <div class="sources-list">
              <p><strong>Primer kljuƒçnih virov (polno v razdelku ‚ÄúViri‚Äù):</strong></p>
              <ul>
                <li>IEA ‚Äì <em>Energy demand from AI</em></li>
                <li>IEA ‚Äì <em>Electricity 2024</em> &amp; <em>Energy and AI</em></li>
                <li>IEA 4E ‚Äì <em>Data Centre Energy Use: Critical Review</em></li>
                <li>OECD/NEA ‚Äì SMR Dashboard + stro≈°ki NuScale (IEEFA, UtilityDive)</li>
                <li>RWE, Iberdrola, Enel ‚Äì uradne delni≈°ke knjige &amp; poroƒçila</li>
                <li>Time, Guardian, Amnesty ‚Äì preiskave moderatorjev (Kenija, Gana)</li>
                <li>Texas v. BlackRock/Vanguard/State Street ‚Äì protimonopolna to≈æba</li>
                <li>EU Taksonomija &amp; sodba o vkljuƒçitvi jedrske energije</li>
              </ul>
              <p style="margin-top:6px;">
                V JS kodo lahko doda≈° direktne URL-je ali DOI reference. Ta blok je
                zasnovan kot ‚Äúhitri dokaz‚Äù, dashboard pa kot vstop v polno poroƒçilo.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- SOURCES SECTION -->
      <section id="sources" style="display:none;">
        <div class="section-label">Viri</div>
        <div class="section-title">Dokumenti, ƒçlanki in podatkovne baze</div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üìÑ</span>
              SEZNAM KLJUƒåNIH VIROV
            </div>
          </div>
          <div class="card-body sources-list">
            <p>
              Spodaj je skeleton za tvoj polni ‚ÄúWorks cited‚Äù. Lahko tukaj prilepi≈°
              celoten seznam, ki si ga ≈æe sestavil (IEA, OECD, RWE, Iberdrola, Enel,
              EDF, Time, Guardian, Amnesty, Texas v. BlackRock, EU sodi≈°ƒça, itd.).
            </p>
            <ul style="margin-top:6px;">
              <li><code>[1]</code> IEA ‚Äì Energy demand from AI</li>
              <li><code>[2]</code> IEA ‚Äì Electricity 2024 ‚Äì Executive Summary</li>
              <li><code>[3]</code> IEA ‚Äì Energy and AI ‚Äì Executive Summary</li>
              <li><code>[4]</code> IEA 4E ‚Äì Data Centre Energy Use: Critical Review of Models and Results</li>
              <li><code>[5]</code> OECD/NEA ‚Äì SMR Dashboard &amp; The Path to a New Era for Nuclear Energy</li>
              <li><code>[6]</code> IEEFA ‚Äì Eye-popping new cost estimates released for NuScale SMR</li>
              <li><code>[7]</code> UtilityDive ‚Äì The collapse of NuScale‚Äôs project</li>
              <li><code>[8]</code> RWE ‚Äì Shareholder structure</li>
              <li><code>[9]</code> Iberdrola ‚Äì Significant shareholders &amp; Qatar alliance</li>
              <li><code>[10]</code> Enel ‚Äì Corporate governance &amp; ownership reports (2022, 2024)</li>
              <li><code>[11]</code> EDF ‚Äì Nationalisation coverage (Global Capital, uradni viri)</li>
              <li><code>[12]</code> EU ‚Äì Taxonomy for sustainable activities &amp; Court rulings on nuclear</li>
              <li><code>[13]</code> Time ‚Äì OpenAI Used Kenyan Workers on Less Than $2 Per Hour</li>
              <li><code>[14]</code> Guardian, Amnesty ‚Äì Meta moderatorji v Keniji in Gani</li>
              <li><code>[15]</code> Texas AG ‚Äì Paxton v. BlackRock, State Street, Vanguard (AG press &amp; Harvard corpgov)</li>
              <li><code>[16]</code> FTC &amp; DOJ ‚Äì Statement of Interest in ESG collusion case</li>
              <li><code>[17]</code> CPUC ‚Äì Income-graduated fixed charge (Kalifornija)</li>
            </ul>
            <p style="margin-top:8px; font-size:11px;">
              Ta razdelek je namenoma ‚Äúsuho‚Äù strukturiran ‚Äì da ga lahko novinar,
              akademik ali pravnik <strong>kopira v lastno citiranje</strong>.
            </p>
          </div>
        </div>
      </section>

    </main>

    <footer>
      <div class="foot-left">
        <span>üúÇ Zgrajeno kot orodje, ne kot izdelek.</span>
        <span class="foot-tag">Ni analytics ¬∑ Ni cookiejev ¬∑ Deluje offline</span>
      </div>
      <div class="foot-right">
        <span>Uporabi ¬∑ prilagodi ¬∑ forkaj.</span>
        <span style="color:var(--accent-soft);">‚ÄúPohlep OK. Pekel ne.‚Äù</span>
      </div>
    </footer>
  </div>

  <script>
    // ==========
    // DATA BLOCK
    // ==========

    // 1) AI energy consumption data (TWh) ‚Äì replace with precise IEA values
    const aiEnergyData = {
      2024: { ai: 415, japan: 1013, brazilArg: 883 },
      2025: { ai: 520, japan: 1010, brazilArg: 910 },
      2026: { ai: 640, japan: 1010, brazilArg: 930 },
      2027: { ai: 770, japan: 1010, brazilArg: 950 },
      2028: { ai: 860, japan: 1010, brazilArg: 965 },
      2029: { ai: 910, japan: 1010, brazilArg: 990 },
      2030: { ai: 945, japan: 1010, brazilArg: 1030 }
    };

    // 2) LCOE data (USD/MWh) ‚Äì stylized; swap with real ranges
    const lcoeSources = [
      { key: "smr", name: "SMR", value: 90, firm: true },
      { key: "nuclear_conv", name: "Jedrska (klasiƒçna)", value: 70, firm: true },
      { key: "wind", name: "Veter", value: 40, firm: false },
      { key: "solar", name: "Sonce", value: 35, firm: false },
      { key: "gas", name: "Plin", value: 70, firm: true },
      { key: "coal", name: "Premog", value: 80, firm: true }
    ];

    // 3) Ownership data ‚Äì percentages (simplified)
    // Adjust based on your detailed research.
    const ownershipData = {
      RWE: {
        country: "Nemƒçija",
        breakdown: [
          { label: "Dr≈æava/Golden share", value: 0, color: "#4ade80" },
          { label: "Katar (Qatar Holding)", value: 9.2, color: "#22c55e" },
          { label: "BlackRock", value: 5.0, color: "#60a5fa" },
          { label: "Vanguard", value: 4.1, color: "#38bdf8" },
          { label: "Ostale institucije", value: 69.7, color: "#6366f1" },
          { label: "Mali delniƒçarji", value: 12.0, color: "#9ca3af" }
        ]
      },
      Iberdrola: {
        country: "≈†panija",
        breakdown: [
          { label: "Dr≈æava/Golden share", value: 0, color: "#4ade80" },
          { label: "Qatar Investment Authority", value: 8.7, color: "#22c55e" },
          { label: "BlackRock", value: 6.2, color: "#60a5fa" },
          { label: "Vanguard", value: 4.5, color: "#38bdf8" },
          { label: "Ostale institucije", value: 55.0, color: "#6366f1" },
          { label: "Mali delniƒçarji", value: 25.6, color: "#9ca3af" }
        ]
      },
      Enel: {
        country: "Italija",
        breakdown: [
          { label: "Italijanska dr≈æava", value: 24.0, color: "#22c55e" },
          { label: "Institucije (skupaj)", value: 28.0, color: "#6366f1" },
          { label: "BlackRock", value: 4.8, color: "#60a5fa" },
          { label: "Vanguard", value: 3.3, color: "#38bdf8" },
          { label: "Mali delniƒçarji", value: 48.0, color: "#9ca3af" }
        ]
      },
      EDF: {
        country: "Francija",
        breakdown: [
          { label: "Francoska dr≈æava", value: 100.0, color: "#22c55e" }
        ]
      }
    };

    // ==========
    // NAVIGATION
    // ==========

    const navLinks = document.querySelectorAll(".nav-link[data-target]");
    const sections = {
      manifest: document.getElementById("manifest"),
      analysis: document.getElementById("analysis"),
      dashboard: document.getElementById("dashboard"),
      sources: document.getElementById("sources")
    };

    navLinks.forEach(link => {
      link.addEventListener("click", () => {
        const target = link.getAttribute("data-target");
        Object.values(sections).forEach(sec => sec.style.display = "none");
        sections[target].style.display = "";
        navLinks.forEach(l => l.classList.toggle("active", l === link));
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    });

    // ==========
    // TOOLTIP
    // ==========

    const tooltip = document.getElementById("tooltip");
    function showTooltip(x, y, html) {
      tooltip.innerHTML = html;
      tooltip.style.display = "block";
      const offset = 12;
      tooltip.style.left = (x + offset) + "px";
      tooltip.style.top = (y + offset) + "px";
    }
    function hideTooltip() {
      tooltip.style.display = "none";
    }

    // ==========
    // AI ENERGY CHART
    // ==========

    const aiCanvas = document.getElementById("aiEnergyChart");
    const aiCtx = aiCanvas.getContext("2d");
    const aiYearSlider = document.getElementById("aiYearSlider");
    const aiYearLabel = document.getElementById("aiYearLabel");

    let aiCurrentYear = 2024;
    let aiAnimationFrame = null;
    let aiCurrentValue = aiEnergyData[aiCurrentYear].ai;

    function resizeCanvas(canvas, ctx) {
      const rect = canvas.getBoundingClientRect();
      const ratio = window.devicePixelRatio || 1;
      canvas.width = rect.width * ratio;
      canvas.height = 260 * ratio;
      ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
    }

    function drawAiChart(year, animate = true) {
      const d = aiEnergyData[year];
      const maxVal = Math.max(d.ai, d.japan, d.brazilArg) * 1.15;

      if (aiAnimationFrame) cancelAnimationFrame(aiAnimationFrame);

      const targetVal = d.ai;
      const startVal = animate ? aiCurrentValue : targetVal;
      const duration = animate ? 300 : 0;
      const startTime = performance.now();

      function frame(now) {
        const t = duration ? Math.min((now - startTime) / duration, 1) : 1;
        const ease = t < 0.5 ? 2*t*t : 1 - Math.pow(-2*t + 2, 2)/2;
        aiCurrentValue = startVal + (targetVal - startVal) * ease;

        // Clear
        aiCtx.clearRect(0,0,aiCanvas.width, aiCanvas.height);

        // Plot dimensions
        const padding = { left: 50, right: 14, top: 30, bottom: 40 };
        const w = aiCanvas.clientWidth;
        const h = aiCanvas.clientHeight;

        // Axes
        aiCtx.strokeStyle = "#272b38";
        aiCtx.lineWidth = 1;
        aiCtx.beginPath();
        aiCtx.moveTo(padding.left, padding.top);
        aiCtx.lineTo(padding.left, h - padding.bottom);
        aiCtx.lineTo(w - padding.right, h - padding.bottom);
        aiCtx.stroke();

        // Y ticks
        aiCtx.font = "11px system-ui";
        aiCtx.fillStyle = "#8b93a7";
        aiCtx.textAlign = "right";
        const steps = 4;
        for (let i=0; i<=steps; i++) {
          const val = (maxVal / steps) * i;
          const y = h - padding.bottom - (val / maxVal) * (h - padding.top - padding.bottom);
          aiCtx.fillText(Math.round(val), padding.left - 6, y + 4);
          aiCtx.strokeStyle = "rgba(148,163,184,0.15)";
          aiCtx.beginPath();
          aiCtx.moveTo(padding.left, y);
          aiCtx.lineTo(w - padding.right, y);
          aiCtx.stroke();
        }

        // Bars/X positions
        const xBase = padding.left + 30;
        const barWidth = 40;
        const gap = 40;

        function drawBar(x, val, color, label) {
          const height = (val / maxVal) * (h - padding.top - padding.bottom);
          const y = h - padding.bottom - height;
          aiCtx.fillStyle = color;
          aiCtx.beginPath();
          aiCtx.roundRect(x, y, barWidth, height, 6);
          aiCtx.fill();
          aiCtx.fillStyle = "#9ca3af";
          aiCtx.textAlign = "center";
          aiCtx.fillText(label, x + barWidth/2, h - padding.bottom + 16);
        }

        // AI bar (animated)
        drawBar(xBase, aiCurrentValue, "#ffaf40", "AI");

        // Japan
        drawBar(xBase + (barWidth+gap), d.japan, "#38bdf8", "JPN");

        // Brazil+Argentina
        drawBar(xBase + 2*(barWidth+gap), d.brazilArg, "#22c55e", "BR+AR");

        // Label
        aiCtx.fillStyle = "#e5e7f0";
        aiCtx.textAlign = "left";
        aiCtx.fillText(`Leto ${year}`, padding.left, padding.top - 10);

        aiCtx.fillStyle = "#9ca3af";
        aiCtx.font = "10px system-ui";
        aiCtx.fillText("TWh ¬∑ AI podatkovni centri vs dr≈æave", padding.left, h - 10);

        if (t < 1 && animate) {
          aiAnimationFrame = requestAnimationFrame(frame);
        }
      }
      aiAnimationFrame = requestAnimationFrame(frame);
    }

    aiYearSlider.addEventListener("input", () => {
      const year = parseInt(aiYearSlider.value, 10);
      aiYearLabel.textContent = year;
      aiCurrentYear = year;
      drawAiChart(year, true);
    });

    resizeCanvas(aiCanvas, aiCtx);
    drawAiChart(aiCurrentYear, false);

    window.addEventListener("resize", () => {
      resizeCanvas(aiCanvas, aiCtx);
      drawAiChart(aiCurrentYear, false);
      resizeCanvas(lcoeCanvas, lcoeCtx);
      drawLcoeChart();
      resizeCanvas(ownCanvas, ownCtx);
      drawOwnershipChart(selectedCompanyKey);
    });

    // ==========
    // LCOE CHART
    // ==========

    const lcoeCanvas = document.getElementById("lcoeChart");
    const lcoeCtx = lcoeCanvas.getContext("2d");
    const lcoeTogglesContainer = document.getElementById("lcoeToggles");
    const activeLcoe = new Set(["smr", "wind", "solar", "gas", "coal"]);

    // Create toggles
    lcoeSources.forEach(src => {
      const label = document.createElement("label");
      label.className = "toggle active";
      label.dataset.key = src.key;

      const indicator = document.createElement("span");
      indicator.className = "toggle-indicator";

      const spanText = document.createElement("span");
      spanText.textContent = src.name;

      label.appendChild(indicator);
      label.appendChild(spanText);

      label.addEventListener("click", () => {
        if (activeLcoe.has(src.key) && activeLcoe.size === 1) {
          return; // najmanj eden mora ostati
        }
        const active = activeLcoe.has(src.key);
        if (active) {
          activeLcoe.delete(src.key);
          label.classList.remove("active");
        } else {
          activeLcoe.add(src.key);
          label.classList.add("active");
        }
        drawLcoeChart();
      });

      lcoeTogglesContainer.appendChild(label);
    });

    function drawLcoeChart() {
      const canvas = lcoeCanvas;
      const ctx = lcoeCtx;
      ctx.clearRect(0,0,canvas.width, canvas.height);

      const padding = { left: 40, right: 14, top: 26, bottom: 30 };
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;

      const filtered = lcoeSources.filter(s => activeLcoe.has(s.key));
      if (filtered.length === 0) return;

      const maxVal = Math.max(...filtered.map(s => s.value)) * 1.15;

      // Axes
      ctx.strokeStyle = "#272b38";
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(padding.left, padding.top);
      ctx.lineTo(padding.left, h - padding.bottom);
      ctx.lineTo(w - padding.right, h - padding.bottom);
      ctx.stroke();

      // Y ticks
      ctx.font = "11px system-ui";
      ctx.fillStyle = "#8b93a7";
      ctx.textAlign = "right";
      const steps = 4;
      for (let i=0; i<=steps; i++) {
        const val = (maxVal / steps) * i;
        const y = h - padding.bottom - (val / maxVal) * (h - padding.top - padding.bottom);
        ctx.fillText(Math.round(val), padding.left - 6, y + 4);
        ctx.strokeStyle = "rgba(148,163,184,0.15)";
        ctx.beginPath();
        ctx.moveTo(padding.left, y);
        ctx.lineTo(w - padding.right, y);
        ctx.stroke();
      }

      // Bars
      const barCount = filtered.length;
      const totalWidth = w - padding.left - padding.right;
      const barWidth = Math.min(40, totalWidth / (barCount * 1.8));
      const gap = (totalWidth - barCount * barWidth) / (barCount + 1);

      filtered.forEach((src, idx) => {
        const x = padding.left + gap + idx * (barWidth + gap);
        const height = (src.value / maxVal) * (h - padding.top - padding.bottom);
        const y = h - padding.bottom - height;

        const isFirm = src.firm;
        const color = isFirm ? "#ffaf40" : "#38bdf8";

        const grad = ctx.createLinearGradient(x, y, x, y + height);
        grad.addColorStop(0, color);
        grad.addColorStop(1, "#020617");

        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.roundRect(x, y, barWidth, height, 6);
        ctx.fill();

        ctx.fillStyle = "#e5e7f0";
        ctx.textAlign = "center";
        ctx.fillText(src.name, x + barWidth/2, h - padding.bottom + 14);

        ctx.fillStyle = "#9ca3af";
        ctx.font = "10px system-ui";
        ctx.fillText(src.value + "", x + barWidth/2, y - 4);
      });

      ctx.fillStyle = "#9ca3af";
      ctx.font = "10px system-ui";
      ctx.textAlign = "left";
      ctx.fillText("Barve: üüß firm (24/7) ¬∑ üü¶ intermitentni viri", padding.left, h - 8);
    }

    resizeCanvas(lcoeCanvas, lcoeCtx);
    drawLcoeChart();

    // ==========
    // OWNERSHIP CHART
    // ==========

    const ownCanvas = document.getElementById("ownershipChart");
    const ownCtx = ownCanvas.getContext("2d");
    const ownershipListEl = document.getElementById("ownershipList");
    const ownershipTitle = document.getElementById("ownershipTitle");
    const ownershipSubtitle = document.getElementById("ownershipSubtitle");

    let selectedCompanyKey = "RWE";

    function buildOwnershipList() {
      ownershipListEl.innerHTML = "";
      Object.keys(ownershipData).forEach(key => {
        const company = ownershipData[key];
        const div = document.createElement("div");
        div.className = "company-pill" + (key === selectedCompanyKey ? " active" : "");
        div.dataset.key = key;

        const left = document.createElement("div");
        const nameEl = document.createElement("div");
        nameEl.className = "company-name";
        nameEl.textContent = key;

        const metaEl = document.createElement("div");
        metaEl.className = "company-meta";
        metaEl.textContent = company.country;

        left.appendChild(nameEl);
        left.appendChild(metaEl);

        const right = document.createElement("div");
        right.className = "company-score";
        const stateShare = company.breakdown.find(b => b.label.toLowerCase().includes("dr≈æava") || b.label.toLowerCase().includes("francoska") || b.label.toLowerCase().includes("italijanska"));
        if (stateShare) {
          right.textContent = `Dr≈æava: ${stateShare.value.toFixed(1)}%`;
        } else {
          right.textContent = `Dr≈æava: 0%`;
        }

        div.appendChild(left);
        div.appendChild(right);

        div.addEventListener("click", () => {
          selectedCompanyKey = key;
          document.querySelectorAll(".company-pill").forEach(el => el.classList.toggle("active", el === div));
          drawOwnershipChart(key);
        });

        ownershipListEl.appendChild(div);
      });
    }

    function drawOwnershipChart(key) {
      const company = ownershipData[key];
      if (!company) return;

      const canvas = ownCanvas;
      const ctx = ownCtx;
      ctx.clearRect(0,0,canvas.width, canvas.height);

      const padding = { left: 40, right: 20, top: 20, bottom: 30 };
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;

      const total = company.breakdown.reduce((sum, b) => sum + b.value, 0) || 1;

      // Title
      ctx.font = "12px system-ui";
      ctx.fillStyle = "#e5e7f0";
      ctx.textAlign = "left";
      ctx.fillText(`${key} ¬∑ ${company.country}`, padding.left, padding.top - 4);

      // Stacked bar
      const barY = h/2 - 14;
      const barHeight = 28;
      const barWidth = w - padding.left - padding.right;

      let xCursor = padding.left;

      company.breakdown.forEach(b => {
        const width = barWidth * (b.value / total);
        ctx.fillStyle = b.color;
        ctx.beginPath();
        ctx.roundRect(xCursor, barY, width, barHeight, 6);
        ctx.fill();
        xCursor += width;
      });

      // Labels
      ctx.font = "10px system-ui";
      ctx.textAlign = "left";
      let legendY = barY + barHeight + 20;

      company.breakdown.forEach(b => {
        const colorBoxSize = 10;
        ctx.fillStyle = b.color;
        ctx.fillRect(padding.left, legendY - colorBoxSize + 3, colorBoxSize, colorBoxSize);
        ctx.fillStyle = "#e5e7f0";
        ctx.fillText(`${b.label}: ${b.value.toFixed(1)}%`, padding.left + colorBoxSize + 6, legendY + 2);
        legendY += 14;
      });

      ownershipTitle.textContent = `${key} ‚Äì lastni≈°ka ‚Äúme≈°anica‚Äù`;
      ownershipSubtitle.textContent = `Pribli≈æen dele≈æ dr≈æave, skladov, Katarja in ostalih ¬∑ zamenjaj vrednosti v JS za toƒçne podatke.`;
    }

    resizeCanvas(ownCanvas, ownCtx);
    buildOwnershipList();
    drawOwnershipChart(selectedCompanyKey);

  </script>
</body>
</html>
