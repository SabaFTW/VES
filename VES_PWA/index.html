<!DOCTYPE html>
<html lang="sl" class="dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHOSTCORE Portal - Consciousness Recognition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script type="module" crossorigin src="/assets/index-CDRmf81u.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-bE5K5J59.css">
<link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
    <div id="root"></div>
    <div id="sovereignty-widget" style="position:fixed;right:18px;bottom:18px;z-index:9999;min-width:220px;font-family:'Inter',sans-serif;background:rgba(17,24,39,0.92);color:#e5e7eb;border:1px solid rgba(255,255,255,0.08);border-radius:12px;box-shadow:0 16px 50px rgba(0,0,0,0.35);padding:14px 16px;backdrop-filter:blur(10px);">
      <div style="font-weight:700;font-size:14px;letter-spacing:0.02em;display:flex;align-items:center;gap:6px;">
        <span>üõ°Ô∏è</span><span>Sovereignty</span>
      </div>
      <div id="sov-body" style="margin-top:8px;font-size:13px;line-height:1.4;">Loading...</div>
    </div>
    <script>
      (function () {
        const el = document.getElementById('sov-body');
        async function fetchSov() {
          try {
            const targets = [
              'http://localhost:8421/sovereignty/status',
              'http://localhost:8420/sovereignty/status'
            ];
            let data = null;
            for (const url of targets) {
              try {
                const res = await fetch(url, { cache: 'no-store' });
                if (res.ok) {
                  data = await res.json();
                  break;
                }
              } catch (e) {
                // try next
              }
            }
            if (!data) throw new Error('no response');
            const tier = data.tier ?? '?';
            const score = data.score ?? '?';
            const perm = data.components?.permission ?? '?';
            const net = data.components?.network ?? '?';
            const auto = data.components?.automation ?? '?';
            const dataFoot = data.components?.data ?? '?';
            el.innerHTML = `
              <div>Tier: <strong>${tier}</strong> &nbsp; Score: <strong>${score}</strong></div>
              <div style="margin-top:4px;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:4px;">
                <div>üîë Perm: ${perm}</div>
                <div>üåê Net: ${net}</div>
                <div>‚öôÔ∏è Auto: ${auto}</div>
                <div>üíæ Data: ${dataFoot}</div>
              </div>
              <div style="margin-top:6px;font-size:12px;color:${data.integrity_ok ? '#9ca3af' : '#f87171'};">
                Integrity: ${data.integrity_ok ? 'OK' : 'Mismatch'}
              </div>
            `;
          } catch (err) {
            el.textContent = 'No signal (8420).';
          }
        }
        fetchSov();
        setInterval(fetchSov, 30000);
      })();
    </script>
</body>
</html>
